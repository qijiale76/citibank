# 需求规格说明书

### 目录

---

**更新记录：**

| 更新人员 | 更新时间  | 更新原因         |
| -------- | --------- | ---------------- |
| 史健均   | 2019.7.31 | 初步明确软件需求 |

---

### 一、前言

#### 1. 项目简介

Hyper-Quant是一个基于人工智能的投资组合风险管理平台。我们通过为用户设计的问题和用户自主选择的偏好，完成用户画像。根据用户的类型，推荐不同的股票投资组合，对这个组合，我们将通过期权实现风险对冲，同时对于组合内部的风险，我们会通过不同的方法从不同的时间维度进行风险评估，对个股风险进行把控并适时调整股票投资组合。对于股市大盘的风险，将通过尾部风险进行计算。通过花旗API，我们将调取用户的数据，作为我们的平台用户，进行股票的模拟交易，同时构建社交网络以及应用推荐算法营造不同的用户圈子，丰富用户体验。

#### 2. 项目前景

待补充。

#### 3. 文档说明

本文档内容涉及此项目的各种功能，目前先提出部分需求，后续增加功能将继续修改。文档核心部分由各个功能的介绍，优先级别，接口数据类型，以及调用响应机制组成。软件小组将根据本文档进行软件的开发和验证工作。**本文档，对于各种功能暂时没有命函数名，需要后面由软件组补充**。

### 二、软件总述

#### 1.软件形式

本平台为网页和app来展现。可以在多种系统和移动端展示。实现软件自适应。

#### 2. 软件假设

- 软件使用者理性填写问卷，根据软件提示做出理性选择。
- 花旗API的数据来源可靠，本软件的其他数据来源可靠。

#### 3. 软件依赖

- 软件依赖服务器，服务器暂未定。
- 软件依赖数据库，大部分暂定为wind数据库。

### 三、软件功能详述

#### 1. 软件接口

**1.1通信接口：**浏览器与服务器均采用http协议进行通信。

**1.2数据接口：**软件数据接口为WindPy，以及tushare等。

#### 2.用户注册，登录，问卷填写及个人信息

**2.1用户注册：**

**功能描述：** 未经注册的用户必须先填写相关信息并登录才能开始使用本平台。

**优先级：**高

**激励-响应机制：**

> - 激励：用户输入没有注册的用户名，邮箱，或手机号；
>
>   响应：系统提示用户名不存在。并弹出提示注册的对话框。
>
> - 激励：用户点击立即注册；
>
>   响应：提供三种注册方式，用户名，邮箱，电话。用户输入用户名，密码和图片验证码，或者，用户输入邮箱手机号注册。
>
> - 激励：用户输入邮箱，点击发送验证邮件；
>
>   响应：发送验证链接至邮箱。
>
> - 激励：用户点击邮箱验证链接；
>
>   响应：跳转至用户注册页面，提示注册成功。
>
> - 激励：用户输入手机号，点击获取验证码；
>
>   响应：发送验证码至用户手机。
>
> - 激励：用户正确输入验证码；
>
>   响应：提示注册成功。跳转至个人信息页面。
>
> - 激励：用户没有正确输入图片验证码或手机验证码；
>
>   响应：提示验证码不正确。
>
> - 激励：用户正确注册；
>
>   响应：提示注册成功，并跳转到个人信息页面，显示用户信息完整度，并提示用户继续完成问卷填写和个人其他信息的填写。
>
> - 激励：用户填写个人信息；
>
>   响应：强烈建议用户通过密保问题，绑定邮箱手机等方式增加账户安全性，否则忘记密码后无法修改密码。
>
> - 激励：用户注册时填写密码；
>
>   响应：如果密码为纯字母或纯数字且少于6位 ，则认定密码过于简单，显示密码安全等级，并不予通过，需要重设。
>
> - 激励：用户注册时填写邮箱，电话；
>
>   响应：检查邮箱和电话的格式，邮箱可以列出后缀供用户选择，电话可以默认为+86，检查位数等。
>

**2.2 用户登录：**

**功能描述：**用户输入已经注册的用户名和密码，进行登录后才可使用系统功能。否则只能看到封面以及用户手册，软件简介，团队介绍等基本信息。

**优先级：**高

**激励-响应机制：**

> - 激励：用户输入正确的用户名和密码，或者邮箱和密码；
>
>   响应：用户成功登录，跳转至首页。
>
> - 激励：用户输入错误的用户名；
>
>   响应：用户名不存在
>
> - 激励：用户输入正确的用户名，错误的密码；
>
>   响应：密码不正确，提示忘记密码是否重置。
>
> - 激励：用户输入手机号；
>
>   响应：发送验证码，验证登录。
>
> - 激励：用户点击忘记密码；
>
>   响应：选择验证方式，手机号码或者邮件，通过邮件重置密码，或者通过手机验证码验证。
>
> - 激励：用户重置密码时，重复输入两次一致的密码；
>
>   响应：重置密码不可过于简单，重置后跳转到登录界面。
>
> - 激励：用户重置密码时，输入不一致；
>
>   响应：提示密码不一致，请重新输入。

**2.3 用户修改个人信息**

**功能描述：**用户登录后可以修改个人信息。包含个人密码，邮箱，电话，投资偏好等。包含用户目前个人信息完成度。

**优先级：**高

**激励-响应机制：**

> - 激励：用户修改邮箱；
>
>   响应：发送验证链接至新邮箱，点击新邮箱跳转到用户个人信息页面。
>
> - 激励：用户修改手机号；
>
>   响应：发送验证码至新手机，验证后，跳转至个人信息页面。
>
> - 激励：用户修改投资偏好；
>
>   响应：个人信息里面包含用户所填问卷，用户修改响应指标即可。
>
> - 激励：用户修改其他信息；
>
>   响应：用户修改头像等其他信息。

#### 3. 用户投资组合

**3.1 用户输入投资组合：**

**功能描述：**在主界面，用户点击创建组合，用户选出股票，并输入股票组合每支股票的数量。

**优先级：**高

**激励-响应机制：**

> - 激励：用户在搜索框中输入股票名称或者代号；
>
>   响应：搜索框下出现自动补全式提示，便于用户选出目标股票。
>
> - 激励：用户点击添加股票至组合；
>
>   响应：需要用户填写股票的数量。
>
> - 激励：用户点击完成创建；
>
>   响应：跳转回主界面，显示出用户的持仓。

**3.2 用户查看投资组合：**

**功能描述：**用户查看我的持仓，看到投资组合的个股股数，比例等，还包含每日持仓，用于查看在应用策略后的组合变化，在每日持仓里，可以查看历史记录。

**优先级：**高

**激励-响应机制：**

> - 激励：用户点击我的持仓；
>
>   响应：用户可以看到投资组合的信息，个股股数，比例，股票的基本信息，比如当前股票的最新价，仓位，开仓均价，当前持有个股的市值，此股票的累计盈亏，此股票的当日盈亏，此股票的交易费用；
>
> - 激励：用户点击某一只股票，查看股票分析详情；
>
>   响应：用户可以看到个股的详细分析，包含股票现价，涨跌，涨跌幅，振幅，最高价，最低价，换手率，成交量，成交金额，总市值，市盈率，市净率等，以及计算出的历史收益率（图），历史波动率（图），预测收益率，预测波动率，股票走势分析（可选择不同周期），股票K线图（可选择不同周期）。
>
> - 激励：用户点击个股股票的某一指标右上角问号；
>
>   响应：显示这个指标的解释。
>
> - 激励：用户查看资产概览页面；
>
>   响应：将显示目前组合的历史收益率（图，表），历史波动率（图，同时可选择不同时间维度，比如月，日的表格来展示），预期收益率，预期波动率；选择某个个股，可以查看个股的历史收益率（图，表），历史波动率（图，表），预期收益率，预期波动率；在投资组合旁，可查看当前组合的Var值，对每一个个股，可以查看个股的VAR。
>
> - 激励：用户点击上一条所述指标；
>
>   响应：可以查看指标的解释，同时附上所在用户手册的链接，可以直接跳转到用户手册相应位置。
>
> - 激励：用户查看投资组合期权对冲策略；
>
>   响应：将根据用户投资组合，显示期权将显示投资组合的收益曲线，显示指标有：回测收益，回测年化收益

对于组合，可以查看组合对应的多因子指标，对于个股，可以查看个股对应的多因子。同时展示出尾部风险指标。

#### 4. 用户查看风控策略

用户进入策略选择页面，供选择的策略有，期权delta对冲等其他期权对冲方法，期货对冲模型，多因子风险管理模型和定期调整以及条件触发模型

**4.1 用户查看多因子风险管理策略**

**功能描述：**用户可以看到组合的多因子，以及个股对应的多因子。超出因子的设定范围的因子将标红，然后个股旁将有调整个股仓位的键和滑块，通过手动调整仓位可以看到个股因子的变化，同时看到组合因子的变化，包含（回复撤销按键）。页面下方显示当前推荐的仓位调整策略，用户可一键调整。页面内还显示根据推荐股票池所选取的几只股票。点击每支个股后，会跳转到个股的信息，此页面会展示除了组合因子之外的个股的其他因子值。以及挖掘出的有关个股的词云。下方展示个股所属板块和公司的新闻。

**优先级：**高

**激励-响应机制：**

> - 激励：用户点击多因子风险管理策略；
>
>   响应：进入此页面。用户看到投资组合（每支个股）。组合上方可以看到组合的因子（预估是三个因子指标）。对于每个个股，展示个股的名称，股票代码，仓位，以及个股的与组合整体对应的三个因子等信息。
>
> - 激励：用户滑动个股右侧的仓位调整条；
>
>   响应：个股的三个因子和组合的三个因子都会变化，可能是值或因子种类的变化，因为取组合最大的三个因子，不过组合和个股展示出的因子种类是相同的，值不同，同时变化。
>
> - 激励：用户手动输入仓位调整的数目；
>
>   响应：同上。
>
> - 激励：用户点击撤回键；
>
>   响应：将撤销到上一步的结果。
>
> - 激励：用户点击一键撤回；
>
>   响应：将提示用户，恢复最初的结果，用户确定，将撤回所有修改。
>
> - 激励：用户查看，点击下方的推荐调整策略；
>
>   响应：用户看到根据投资组合推荐的调整仓位的方法，用户点击后按照推荐调整，同时改变组合和个股的因子值，用户也可一键撤回修改。
>
> - 激励：用户点击应用；
>
>   响应：提示用户是否确定，用户发生交易，不可撤回，具体参考交易账户模块。
>
> - 激励：用户查看推荐股票；
>
>   响应：用户看到根据一定方法计算出来的，经过选取的一定数量的推荐股票。包含股票的基本信息，简称，代码，价格，历史十天内平均收益率，历史一定时期内平均波动率。
>
> - 激励：用户点击推荐的股票；
>
>   响应：跳转到股票的信息页面，参考查看投资组合功能中，点击股票的相关信息。
>
> - 激励：用户点击添加股票至投资组合；
>
>   响应：用户选择股票股数，执行交易，参考用户交易模块，用户确定交易后，刷新页面，（如果此处计算量大，先跳转到查看组合页面），同时后台进行计算，更新各种策略对应的值，以及组合的基本信息等。
>
> - 激励：用户点击某只个股；
>
>   响应：跳转（或在一侧打开等）到个股的一个页面：此处展示个股的因子，包含组合的因子以及未被纳入组合的因子。显示词云。词云根据爬虫挖掘出的关键词文本创建。下方展示相关板块和公司的热点新闻公告等。（备选展示：情感分析指标）

**4.2 用户查看期权对冲策略**

**功能描述：**用户在此页面可查看并选择期权的风险对冲策略，可以看到期权对冲所包含的几个希腊字母风险指标，如delta，theta，vega，rho等，超出一定阈值的希腊字母将标红。用户可通过滑块(比例调整)或手动输入(delta值)调整对冲的delta比例值，同时看到组合总波动率、VaR、收益率等值的变化，包含（回复撤销按键）。用户还可通过一下拉列表选择期权种类。在页面中一块区域显示当前推荐的策略：仓位调整的Delta值和比例值、推荐期权种类，用户可一键调整。页面内还显示根据效果推荐的几只期权。点击每支期权后，会跳转到对应期权的信息，此页面会展示该期权的种种历史数据：历史走势图、希腊字母指标、历史波动率等。

**优先级：**高

**激励-响应机制：**

> - 激励：用户点击期权对冲策略；
>
>   响应：进入此页面。用户看到总投资组合的历史价值走势，旁边可以看到组合的总体风险指标（预估是历史波动率、收益率，要想丰富可以设置多个不同日期的波动率和收益率，如近一周、近一个月等）。此外再展示组合中的衍生品风险指标（主要是5个希腊字母）。
>
> - 激励：用户滑动对冲比例的调整条；
>
>   响应：对冲比例为100%时为推荐delta值，滑动比例定为0~200%；组合总的回测收益率、波动率会随之变化，组合总希腊字母值也会变化；推荐里可据回测波动率和收益率选取最优的推荐期权；
>
> - 激励：用户直接手动输入对冲的值（delta值）；
>
>   响应：同上。
>
> - 激励：用户点击撤回键；
>
>   响应：将撤销到上一步的结果。
>
> - 激励：用户点击一键撤回；
>
>   响应：将提示用户，恢复最初的结果，用户确定，将撤回所有修改。
>
> - 激励：用户选择套保策略（只delta套保和同时delta+gamma套保）
>
>   响应：内部计算算法改变、各指标均重新计算更新;最好可以在股指期权旁边显示对应同种股指期货的数据
>
> - 激励：用户查看，点击下方的推荐调整策略；
>
>   响应：用户看到根据投资组合推荐的对冲方法，用户点击后按照推荐对冲，同时改变组合的比例、各风险指标，用户也可一键撤回修改。
>
> - 激励：用户点击应用；
>
>   响应：提示用户是否确定，用户发生交易，不可撤回，具体参考交易账户模块。
>
> - 激励：用户查看推荐期权；
>
>   响应：用户看到根据回测波动率、收益率选取的一定数量的推荐期权种类。包含期权的基本信息，简称，代码，价格，希腊字母、历史波动率等指标。
>
> - 激励：用户点击推荐的期权；
>
>   响应：跳转到期权的信息页面，参考查看投资组合功能中，点击期权的相关信息（暂时没写入投资组合部分）。
>
> - 激励：用户选择套保期权；
>
>   响应：用户选择套保期权的种类，数量比例由上述滑动条、手动输入确定；执行交易，参考用户交易模块，用户确定交易后，刷新页面，（如果此处计算量大，先跳转到查看组合页面），同时后台进行计算，更新各种策略对应的值，以及组合的基本信息等。

**4.3 用户查看期货对冲策略**

**功能描述：**
用户在此页面可查看并选择期货的风险对冲策略（目前只有一种，考虑可以和期权页面合并整合一下？），可以看到期货对冲所包含的beta值和几个希腊字母风险指标，如delta，theta，vega，rho等，超出一定阈值的希腊字母将标红。用户可通过滑块(比例调整)或手动输入(b值)调整对冲的b比例值，同时看到组合总波动率、VaR、收益率等值的变化，包含（回复撤销按键）。用户还可通过一下拉列表选择期货种类。在页面中一块区域显示当前推荐的策略：仓位调整的b值和比例值、推荐期货种类，用户可一键调整。页面内还显示根据效果推荐的几只期货。点击每支期货后，会跳转到对应期货的信息，此页面会展示该期货的种种历史数据：历史走势图、希腊字母指标、历史波动率等。

**优先级：**中

**激励-响应机制：**

> - 激励：用户点击期货对冲策略；
>
>   响应：进入此页面。用户看到总投资组合的历史价值走势，旁边可以看到组合的总体风险指标（预估是历史波动率、收益率，要想丰富可以设置多个不同日期的波动率和收益率，如近一周、近一个月等）。此外再展示组合中的衍生品风险指标（主要是希腊字母delta,theta,rho,和beta值）。
>
> - 激励：用户滑动对冲比例的调整条；
>
>   响应：对冲比例为100%时为推荐b值，滑动比例定为0~200%；组合总的回测收益率、波动率会随之变化，组合总希腊字母值也会变化；推荐里可据回测波动率和收益率选取最优的推荐期货；
>
> - 激励：用户直接手动输入对冲的值（b值）；
>
>   响应：同上。
>
> - 激励：用户点击撤回键；
>
>   响应：将撤销到上一步的结果。
>
> - 激励：用户点击一键撤回；
>
>   响应：将提示用户，恢复最初的结果，用户确定，将撤回所有修改。
>
> - 激励：用户查看，点击下方的推荐调整策略；
>
>   响应：用户看到根据投资组合推荐的对冲方法，用户点击后按照推荐对冲，同时改变组合的比例、各风险指标，用户也可一键撤回修改。
>
> - 激励：用户点击应用；
>
>   响应：提示用户是否确定，用户发生交易，不可撤回，具体参考交易账户模块。
>
> - 激励：用户查看推荐期货；
>
>   响应：用户看到根据回测波动率、收益率选取的一定数量的推荐期货种类。包含期货的基本信息，简称，代码，价格，希腊字母、历史波动率等指标。
>
> - 激励：用户点击推荐的期货；
>
>   响应：跳转到期权的信息页面，参考查看投资组合功能中，点击期货的相关信息（暂时没写入投资组合部分）。
>
> - 激励：用户选择套保期货；
>
>   响应：用户选择套保期货的种类，数量比例由上述滑动条、手动输入确定；执行交易，参考用户交易模块，用户确定交易后，刷新页面，（如果此处计算量大，先跳转到查看组合页面），同时后台进行计算，更新各种策略对应的值，以及组合的基本信息等。

**4.4 用户设置定期调整策略**

**功能描述：**定期轮动为定期调仓交易模型，用户可以基于选出的投资组合，设置调仓周期、最大持仓股票数量。该模型会定期在调仓日卖出不符合条件的股票，然后通过短信或邮件的方式通知用户。页面会显示出用户的投资组合的基本信息。参考用户查看投资组合功能。

**优先级：**中

**激励-响应机制：**

> - 激励：用户调整调仓周期，最少持仓股票数，预期波动率，当日的波动率，周期内的平均波动率，周期内或近几日（可选）的均值价格，最低可接受价格（限调整当日），MACD等；响应：指标更改，定期调整投资组合并提示用户修改成功；
>
> - 激励：用户使用时需要进行授权，需要允许调用用户的资产账户和修改投资组合的权限；
>
>   响应：系统具备权限，可以自动修改用户投资组合，帮户用户进行交易。

**4.5 用户设置条件触发策略**

**功能描述：**对于条件触发模型，用户可以设置投资组合的各种条件，仅限于卖出条件，我们不负责帮助用户买股。卖出条件包括卖出周期，最低接受价格，波动率，最少持仓股数，成交额，换手率，一段时间内的价格均值，MACD，RSI，KDJ，ROC值。应用此功能后，将对用户组合进行持续监控。

**优先级：**中

**激励-响应机制：**

> - 激励：用户设置或修改值；
>
>   响应：提示修改成功
>
> - 激励：用户使用此策略；
>
>   响应：需要用户授权
>
> - 激励：用户组合发生变化（自动卖出）；
>
>   响应：通过短信和邮件提示用户组合发生变动。

#### 5. 用户交易

**功能描述：**用户花旗银行API中绑定的银行卡与平台设立的银行账户之间的转账交易。

**优先级：**中

**激励-响应机制：**

> - 激励：用户选择交易时；
>
>   响应：平台展示责任条款，并提示用户是否确定；
>
> - 激励：用户同意继续交易；
>
>   响应：平台调用花旗API将用户所需资金从用户绑定的花旗银行卡上转入平台设立的资产账户上。
>
> - 激励：花旗API显示转账成功；
>
>   响应：平台提示用户转账成功，用户账户金额增加。手续费从转账金额里扣取。
>
> - 激励：花旗API转账失败；
>
>   响应：平台提示用户转账失败。
>
> - 激励：用户提取平台的本金和收益；
>
>   响应：向花旗API中用户账户转账，手续费从账户中扣取。

#### 6. 用户手册

**功能描述：**用户手册帮助用户查看平台该如何使用，以及相关指标的解释说明。用户手册内容将在最后系统功能基本完善后整理出来。

**优先级：**低

**激励-响应机制：**

> - 激励：用户点击指标旁边的问号；
>
>   响应：将在右侧显示指标的简单解释。
>
> - 激励：用户点击指标解释的跳转链接；
>
>   响应：将直接打开用户手册的相应页面。
>
> - 激励：用户点击用户手册中的标题；
>
>   响应：将在右侧打开相关内容页面。

#### 7.投资组合推荐

**功能描述：**待补充

**优先级：**中

**激励-响应机制：**

> - 

#### 8.花旗API应用

通过API获取用户数据，包括用户电话，地理位置，邮箱，收入，曾经买过的股票，交易记录等信息。将花旗API用户作为我们的假设平台用户，通过这些信息总结出一定数量的（功能待完善）指标，然后计算出用户的投资风险偏好指数。设计用户问卷，用户个人信息等。拟建立社交网络，根据用户的历史投资偏好来建图，在多因子管理页面，加入根据社交网络关系得出的推荐的股票。拟建立一个论坛，论坛根据社交网络邻近关系来确定贴子（发言）的不同暴露度，然后根据重要度进行展示。

**8.1 用户问卷**

**功能描述：**用户填写投资偏好问卷。后续可更改和重新填写偏好。根据用户个人信息，以及历史购买组合和收入等因素，计算出用户的投资风险偏好指标。

**优先级：**中

**激励-响应机制：**

> - 激励：用户点击填写问卷；
>
>   响应：弹出问卷填写页面。
>
> - 激励：用户填写完后，点击保存；
>
>   响应：若用户必答题均填写完毕，则保存成功。
>
> - 激励：用户必答题没有填写完毕；
>
>   响应：提示用户哪道题没有填写完毕，点击题号，并跳转到相应位置。
>
> - 激励：用户保存成功，并跳转到个人信息页面；
>
>   响应：个人信息页面信息更新，展示出用户填写过的问卷信息。
>
> - 激励：用户修改个人信息，如偏好设置；
>
>   响应：若用户修改的是问卷题目，则显示填写问卷时提供的选项，若用户修改其余的信息，则检查用户修改后是否符合格式要求。
>
> - 激励：用户点击（或将鼠标移至）信息完善度（一个分数，不同分数对应不同颜色）；
>
>   响应：显示出用户还可以如何完善信息，给出提示。

**8.2 用户社交网络**

**功能描述：**根据用户历史投资股票，计算用户间的相似度，结合用户的投资风险偏好指标，然后对相似用户建立边。每日定期维护，在数据量不大的情况下，每次重新建图。

**优先级：**低

**激励-响应机制：**

> - 激励：用户调整投资组合后；
>
>   响应：重新计算用户与其他用户的相似度，定期重新建图。
>
> - 激励：用户调整投资偏好设置后；
>
>   响应：重新计算用户的投资偏好指标，重新建图。

**8.3 用户论坛**

**功能描述：**展示当下各用户发帖情况，为平台加入社交属性，同时作为社交网络的拓展应用。如果用户之间有边，那么用户的发贴将被优先暴露，其次，根据热度，时间两个不同维度，将帖子排序进行展示，热度高的位于前列，时间新的位于前列。用户可以在帖子下面评论回复。目前没有考虑用户个人页面，即点击用户名没有效果，不发生跳转。用户只在论坛中参与社交。

**优先级：**低

**激励-响应机制：**

> - 激励：用户点击发帖；
>
>   响应：输入内容，图片等，检查不包含敏感词汇。
>
> - 具体情况可参考相关论坛模板，可直接套用。

### 四、其他规定

#### 4.1 时间要求

**响应时间：**

**运行时间：**

**数据传送时间：**

#### 4.2 灵活性

**操作方式：**

**运行环境：**

**其他软件接口：**

#### 4.3 安全性：

**数据的安全性：**

**数据的保密性：**

#### 4.4 硬件约束：

**设备：**

**系统：**

**服务器：**



### 后记

- 有关各个功能的函数我没有命名，需要后面软件组的同学补充到这个报告上，并修改更新记录。
- 有些页面如果展示内容较多，导致页面打开变慢，可以调整展示内容，页面打开顺序等。
- 有关跳转等词语，只是我用来描述此处变化的词，不代表最终一定会跳转到新页面，根据实际情况来定。有可能只是显示出一个文字框，有可能在一侧打开，有可能打开新的一个网页等。
- 以上主要是基于网页的构建（展示）思路，对于app，相关信息可能会删改，因为手机屏幕大小有限，展示的内容不会很多；以及相关的信息所处位置会改变。后续保持交流。